{% extends 'base.html' %}

{% block title %}Mon Profil - InvestLink{% endblock %}

{% block content %}
<div class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
    
    <!-- Header Compact -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-2xl font-bold mb-1">Mon Profil</h1>
                    <p class="text-blue-100 text-sm">Consultez vos informations personnelles</p>
                </div>
                <a href="{% url 'users:profile_edit' %}" class="bg-white text-blue-600 hover:bg-blue-50 font-semibold px-6 py-2 rounded-lg transition shadow-md">
                    <i class="fas fa-edit mr-2"></i>Modifier
                </a>
            </div>
        </div>
    </div>
    
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            
            <!-- Informations Personnelles -->
            <section class="mb-8">
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-900 flex items-center">
                            <i class="fas fa-user text-blue-600 mr-3"></i>
                            Informations Personnelles
                        </h2>
                    </div>
                    
                    <div class="p-6">
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="md:col-span-1 text-center">
                                {% if user.avatar %}
                                    <img src="{{ user.avatar.url }}" alt="Avatar" class="w-32 h-32 rounded-full object-cover mx-auto mb-3 border-4 border-blue-100">
                                {% else %}
                                    <div class="w-32 h-32 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full mx-auto mb-3 flex items-center justify-center text-white text-4xl font-bold border-4 border-blue-100">
                                        {{ user.first_name|first|default:user.username|first }}{{ user.last_name|first|default:"" }}
                                    </div>
                                {% endif %}
                                <p class="text-sm text-gray-500">Photo de profil</p>
                            </div>
                            
                            <div class="md:col-span-2 space-y-4">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-600 mb-1">Prénom</label>
                                        <p class="text-gray-900 text-lg">{{ user.first_name|default:"Non renseigné" }}</p>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-semibold text-gray-600 mb-1">Nom</label>
                                        <p class="text-gray-900 text-lg">{{ user.last_name|default:"Non renseigné" }}</p>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-600 mb-1">Email</label>
                                    <p class="text-gray-900 flex items-center">
                                        <i class="fas fa-envelope text-gray-400 mr-2"></i>
                                        {{ user.email }}
                                    </p>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-600 mb-1">Téléphone</label>
                                    <p class="text-gray-900 flex items-center">
                                        <i class="fas fa-phone text-gray-400 mr-2"></i>
                                        {{ user.phone|default:"Non renseigné" }}
                                    </p>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-semibold text-gray-600 mb-1">Type de compte</label>
                                    <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold
                                        {% if user.user_type == 'porteur' %}bg-green-100 text-green-800
                                        {% elif user.user_type == 'investisseur' %}bg-blue-100 text-blue-800
                                        {% elif user.user_type == 'admin' %}bg-purple-100 text-purple-800
                                        {% endif %}">
                                        <i class="fas fa-user-tag mr-1"></i>
                                        {% if user.user_type == 'porteur' %}Porteur de projet
                                        {% elif user.user_type == 'investisseur' %}Investisseur
                                        {% elif user.user_type == 'admin' %}Administrateur
                                        {% endif %}
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        {% if user.bio %}
                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <label class="block text-sm font-semibold text-gray-600 mb-2">Biographie</label>
                            <p class="text-gray-700 leading-relaxed">{{ user.bio }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </section>
            
            <!-- Profil Porteur -->
            {% if porteur_profile %}
            <section class="mb-8">
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-900 flex items-center">
                            <i class="fas fa-briefcase text-green-600 mr-3"></i>
                            Informations Entreprise
                        </h2>
                    </div>
                    
                    <div class="p-6 space-y-4">
                        <div>
                            <label class="block text-sm font-semibold text-gray-600 mb-1">Nom de l'entreprise</label>
                            <p class="text-gray-900 text-lg font-medium">{{ porteur_profile.company_name|default:"Non renseigné" }}</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-semibold text-gray-600 mb-1">Numéro d'enregistrement</label>
                            <p class="text-gray-900">{{ porteur_profile.company_registration|default:"Non renseigné" }}</p>
                        </div>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-1">Site web</label>
                                {% if porteur_profile.website %}
                                    <a href="{{ porteur_profile.website }}" target="_blank" class="text-blue-600 hover:text-blue-800 flex items-center">
                                        <i class="fas fa-globe mr-2"></i>
                                        Visiter le site
                                        <i class="fas fa-external-link-alt ml-2 text-xs"></i>
                                    </a>
                                {% else %}
                                    <p class="text-gray-400">Non renseigné</p>
                                {% endif %}
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-1">LinkedIn</label>
                                {% if porteur_profile.linkedin %}
                                    <a href="{{ porteur_profile.linkedin }}" target="_blank" class="text-blue-600 hover:text-blue-800 flex items-center">
                                        <i class="fab fa-linkedin mr-2"></i>
                                        Voir le profil
                                        <i class="fas fa-external-link-alt ml-2 text-xs"></i>
                                    </a>
                                {% else %}
                                    <p class="text-gray-400">Non renseigné</p>
                                {% endif %}
                            </div>
                        </div>
                        
                        {% if porteur_profile.bio %}
                        <div class="pt-4 border-t border-gray-200">
                            <label class="block text-sm font-semibold text-gray-600 mb-2">Biographie professionnelle</label>
                            <p class="text-gray-700 leading-relaxed">{{ porteur_profile.bio }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </section>
            {% endif %}
            
            <!-- Profil Investisseur -->
            {% if investisseur_profile %}
            <section class="mb-8">
                <div class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-xl font-bold text-gray-900 flex items-center">
                            <i class="fas fa-chart-line text-purple-600 mr-3"></i>
                            Préférences d'Investissement
                        </h2>
                    </div>
                    
                    <div class="p-6">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-2">Fourchette d'investissement</label>
                                {% if investisseur_profile.investment_range %}
                                    <div class="flex items-center p-3 bg-green-50 rounded-lg border border-green-200">
                                        <i class="fas fa-dollar-sign text-green-600 text-xl mr-3"></i>
                                        <span class="text-gray-900 font-medium">{{ investisseur_profile.get_investment_range_display }}</span>
                                    </div>
                                {% else %}
                                    <p class="text-gray-400">Non renseigné</p>
                                {% endif %}
                            </div>
                            
                            <div>
                                <label class="block text-sm font-semibold text-gray-600 mb-2">Niveau de risque accepté</label>
                                {% if investisseur_profile.risk_level %}
                                    <div class="flex items-center p-3 
                                        {% if investisseur_profile.risk_level == 'low' %}bg-blue-50 border border-blue-200
                                        {% elif investisseur_profile.risk_level == 'medium' %}bg-yellow-50 border border-yellow-200
                                        {% elif investisseur_profile.risk_level == 'high' %}bg-red-50 border border-red-200
                                        {% endif %} rounded-lg">
                                        <i class="fas fa-chart-bar 
                                            {% if investisseur_profile.risk_level == 'low' %}text-blue-600
                                            {% elif investisseur_profile.risk_level == 'medium' %}text-yellow-600
                                            {% elif investisseur_profile.risk_level == 'high' %}text-red-600
                                            {% endif %} text-xl mr-3"></i>
                                        <span class="text-gray-900 font-medium">{{ investisseur_profile.get_risk_level_display }}</span>
                                    </div>
                                {% else %}
                                    <p class="text-gray-400">Non renseigné</p>
                                {% endif %}
                            </div>
                        </div>
                        
                        {% if investisseur_profile.sectors_of_interest %}
                        <div class="mt-6">
                            <label class="block text-sm font-semibold text-gray-600 mb-2">Secteurs d'intérêt</label>
                            <div class="flex flex-wrap gap-2">
                                {% for sector in investisseur_profile.sectors_of_interest.splitlines %}
                                    <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium">
                                        <i class="fas fa-tag mr-1"></i>{{ sector }}
                                    </span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                        
                        {% if investisseur_profile.bio %}
                        <div class="mt-6 pt-6 border-t border-gray-200">
                            <label class="block text-sm font-semibold text-gray-600 mb-2">Biographie</label>
                            <p class="text-gray-700 leading-relaxed">{{ investisseur_profile.bio }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </section>
            {% endif %}
            
            <!-- Actions -->
            <section>
                <div class="grid md:grid-cols-3 gap-6">
                    <a href="{% url 'users:dashboard' %}" class="bg-white hover:shadow-lg transition rounded-lg p-6 text-center border-2 border-gray-200 hover:border-blue-500">
                        <i class="fas fa-home text-4xl text-blue-600 mb-3"></i>
                        <h3 class="font-semibold text-gray-800 mb-1">Dashboard</h3>
                        <p class="text-sm text-gray-600">Retour au tableau de bord</p>
                    </a>
                    
                    <div class="bg-white hover:shadow-lg transition rounded-lg p-6 text-center border-2 border-gray-200 hover:border-yellow-500 cursor-not-allowed opacity-75">
                        <i class="fas fa-lock text-4xl text-yellow-600 mb-3"></i>
                        <h3 class="font-semibold text-gray-800 mb-1">Sécurité</h3>
                        <p class="text-sm text-gray-600">Changer le mot de passe</p>
                        <p class="text-xs text-gray-400 mt-2">Bientôt disponible</p>
                    </div>
                    
                    <div class="bg-white hover:shadow-lg transition rounded-lg p-6 text-center border-2 border-gray-200 hover:border-red-500 cursor-not-allowed opacity-75">
                        <i class="fas fa-user-times text-4xl text-red-600 mb-3"></i>
                        <h3 class="font-semibold text-gray-800 mb-1">Compte</h3>
                        <p class="text-sm text-gray-600">Supprimer mon compte</p>
                        <p class="text-xs text-gray-400 mt-2">Bientôt disponible</p>
                    </div>
                </div>
            </section>
            
        </div>
    </div>
</div>
{% endblock %}
